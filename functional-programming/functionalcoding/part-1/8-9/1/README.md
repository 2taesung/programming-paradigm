# 패턴 1: 직접 구현(함수를 만들어 끌올)

계층 구조는 아무리 강력한 기능을 하는 함수가 있더라도 <mark style="background-color:green;">복잡하지 않게 함수</mark>를 표현해야 합니다.



### 설계 스프린트

코드에 있는 지식으로 장바구니가 해야 할 동작을 정리해보기

![](<../../../../.gitbook/assets/image (20).png>)

### 중복 함수를 추출하기

설계 스프린트를 통해 중복되는 행위가 있다면 함수로 추출합니다.



### 호출 그래프를 만들어 함수 호출을 시각화하기

이것으 목표는 해당 함수의 구현부 코드들의 <mark style="background-color:green;">'추상화 수준'</mark>을 파악하기 위함이다.



175사진



직접 만든 함수와 언어 기능은 추상화 수준이 다르다.

화살표의 길이가 다르다. 이들은 다른 계층을 의미한다.



### 직접 구현 패턴을 사용하여(함수를 추출) 비슷한 추상화 계층에 있는 함수를 호출.

어려운 말로 설명되어  있는데 쉽게 말하면 낮은 추상화 수준의 코드들을 하나의 함수로 추상화 시켜 다른 코드들과 추상화 수준을 일치 시켜 같은 계층으로 구성되게 한다.



또한, 해당 함수가 장바구니 데이터가 '배열' 자료구조로 되어있다는 것을 알 필요가 없다.&#x20;

183 사진

### 추가 팁

Q. 앞에서 그린 계층이 정답인가요? 모두가 동의할 수 있는 객관적인 건가요?

계층형 설계는 각자의 관점으로 사람들이 사용하면서 습득한 것입니다. 이것을 코드를 보는 '고글'이라고 생각해봅시다. 그러면 내 고글도 있지만 다른 사람의 고글도 써볼 수 있습니다. 다른 사람의 고글이 내 고글보다 더 좋다면 같은걸로 구매할 수도 있습니다.



### 같은 계층에 있는 함수는 같은 목적을 가져야 합니다.

185사진

어떤 계층에 있는 함수를 읽거나 고칠 때 낮은 수준의 구체적인 내용은 신경 쓰지 않아도 됩니다.



### 반복문 빼내기

189사진

indexOfItem() vs removeItems() 이 둘의 계층 수준은 어떨까요 ???



정답은 ?

removeItems가 더 높은 계층이다.

왜냐하면 indexOfItem은 (Cart, name) 을 인자로 받음으로&#x20;

열(언어 특성)에 name이라는 항목이 있어야하는 것을 알아야하기 때문.&#x20;



### 화살표 길이 vs 화살표 갯수

193사진

화살표 길이를 줄이는 것에 집중해 보면 더 좋은 계층 구조를 만들 수 있다.



### 추가 팁

Q. 설계가 더 좋아진게 진짜 맞나요?

이런 질문이 설계에 가장 어려운 점이기도 합니다.

결국 좋은 설계를 하기 위해서는 <mark style="background-color:green;">지속적인 탐구</mark>와 <mark style="background-color:green;">직관</mark>이 필요합니다.

설계는 어렵고, 개발자들도 서로 동의하지 않을 수 있고, 상황에 다라 좋은 설계의 기준이 달라지기도 합니다. 그래서 설계에 대해 이야기할 때는 <mark style="background-color:green;">같은 용어를 사용</mark>하는 것이 <mark style="background-color:green;">중요하고 상황을 고려</mark>해서 평가 해야 합니다.




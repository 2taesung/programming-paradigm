# 개선하기

### 액션과 계산, 데이터를 구분하기

### 함수에는 입력과 출력이 있습니다.

#### 입력은 함수가 계산을 하기 위한 <mark style="background-color:green;">외부 정보</mark>입니다.

#### 입력과 출력은 명시적이거나 암묵적일 수 있습니다.

명시적 입력 : 인자 / 그 외(전역변수) 암묵적(부수효과)

명시적 출력 : 리턴값 / 그 외(전역변수변형) 암묵적(부수효과)



#### 테스트와 재사용성은 입출력과 관련 있습니다.

앞에서 봤던 테스트, 사용성 개선 제안들은

'<mark style="background-color:green;">암묵적 입력, 출력</mark>'을 없애야한다고 말하고 있습니다.



### 액션에서 계산 빼내기

'서브루틴 추출하기'를 진행합니다.

함수로 뺄 수 있는건 다 뺍니다.



새로 만든 함수는 아직 액션이기 때문에 계산으로 바꿔야 합니다. 계산으로 바꾸려면 먼저 어떤 입력과 출력이 있는지 확인해야합니다.



암묵적 입출력들을 모두 명시적입출력들로 바꿉니다.

최종적으로 <mark style="background-color:green;">'모든 입력은 인자', '모든 출력은 리턴값'이 되어야합니다.</mark>

그렇게 이들은 순수함수입니다.



### 추가팁

Q. 어떻게 전역변수의 재할당을 처리하나요?

복사본을 만들고 복사본을 변형해 리턴으로 전역 변수에 영향을 줍니다.



Q. 코드가 더 많아진 것 같습니다.

최소 두 줄이 많아졌을 것입니다.(함수 입출력) 하지만 시간이 지나면서 함수로 분리한 것에 장점을 얻을 수 있습니다. 이미 우리는 1. 테스트 2. 재사용 의 장점을 확보했습니다. 또한, 동시성, 설계, 데이터 모델링 등의 장점들을 차차 알아볼것입니다.



Q. 재사용성 계획이 없는 함수도 분리하는 것이 중요한가요?

함수형 프로그래밍의 목적 중 하나는 어떤 것을 분리해서 더 작게 만들려고 하는 것도 있습니다. 작은 것은 테스트하기 쉽고 재사용하기 쉽고 이해하기 쉽고 리팩토링하기 쉽기 때문입니다.



### 단계별로 알아보기

1. 계산 코드를 찾아 빼냅니다.(함수 추출하기)
2. 새 함수에 암묵적 입력과 출력을 찾습니다.(인자, return 값이 아닌 것)
3. 암묵적 입력은 인자로 암묵적 출력은 리턴값으로 바꿉니다.



### 결론

일단, 모두가 행복해졌습니다.

'더' 좋은 설계를 할 수 있을지 생각해봅시다.

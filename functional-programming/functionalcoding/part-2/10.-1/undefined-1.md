# 함수 본문을 콜백으로 바꾸기



<figure><img src="../../../.gitbook/assets/image (1).png" alt=""><figcaption></figcaption></figure>

사실 이것도 동일하다.

대신 일급함수이기 때문에 함수를 인자로 보낼 수 있기 때문에 자유도가 굉장히 높다.



### 함수 본문을 콜백으로 바꾸기 단계

1. 본문과 본문의 앞부분과 뒷부분을 구분합니다.
2. 전체를 함수로 빼냅니다.
3. 본문 부분을 빼낸 함수의 인자로 전달한 함수로 바꿉니다.

### 문법을 활용한 다양한 방법들

1. 전역으로 정의하기
2. 지역적으로 정의하기
3. 인라인으로 정의하기



### 왜 본문을 함수로 감싸서 넘기나요?

코드가 바로 실행되면 안되기 때문.

이러면여러 조건들을 활용해서 실행을 시킬 수 있다.



### 얻은 이득

1. 표준화된 원칙
2. 새로운 동작에 원칙을 적용
3. 여러 개를 변경할 때 최적화

배열에 쓸 수 있는 카피-온-라이트 원칙을 코드로 만들었다.

똑같은 코드를 반복하지 않아도 된다.

카피-온-라이트 원칙에 대한 코드를 한 곳에서 관리할 수 있다.



### 추가 팁

Q. 본문을 콜백으로 바꾸기 리팩터링은 중복을 없애는 것 같은데 그게 전부인가요?

네, 중복을 없애는 것에 관한 리팩터링이 맞습니다. 대신 고차함수를 사용하게 됩니다.



Q. 왜 함수에 일반 데이터값을 전달하지 않고 함수를 전달하나요 ?



withLogging(data) vs withLogging(saveUserData(user))

후자는 withLogging 함수랑 상관없이 saveUserData의 에러가 발생합니다.

조금 어려운 말로 결론적으로&#x20;

함수로 전달하는 이유는 함수 안에 있는 코드가 <mark style="background-color:green;">특정한 문맥</mark> 안에서 실행돼야 하기 때문입니다.



### 결론

일급 값, 일급 함수, 고차 함수에 대해.
